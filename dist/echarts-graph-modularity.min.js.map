{"version":3,"file":"echarts-graph-modularity.min.js","mappings":"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","sources":["webpack://echarts-graph-modularity/webpack/universalModuleDefinition","webpack://echarts-graph-modularity/./index.js","webpack://echarts-graph-modularity/./node_modules/ngraph.centrality/index.js","webpack://echarts-graph-modularity/./node_modules/ngraph.centrality/src/betweenness.js","webpack://echarts-graph-modularity/./node_modules/ngraph.centrality/src/degree.js","webpack://echarts-graph-modularity/./node_modules/ngraph.events/index.js","webpack://echarts-graph-modularity/./node_modules/ngraph.graph/index.js","webpack://echarts-graph-modularity/./node_modules/ngraph.modularity/Community.js","webpack://echarts-graph-modularity/./node_modules/ngraph.modularity/CommunityStructure.js","webpack://echarts-graph-modularity/./node_modules/ngraph.modularity/ModEdge.js","webpack://echarts-graph-modularity/./node_modules/ngraph.modularity/Modularity.js","webpack://echarts-graph-modularity/./src/main.js","webpack://echarts-graph-modularity/external umd \"echarts\"","webpack://echarts-graph-modularity/webpack/bootstrap","webpack://echarts-graph-modularity/webpack/runtime/compat get default export","webpack://echarts-graph-modularity/webpack/runtime/define property getters","webpack://echarts-graph-modularity/webpack/runtime/hasOwnProperty shorthand","webpack://echarts-graph-modularity/webpack/runtime/make namespace object","webpack://echarts-graph-modularity/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"echarts\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"echarts\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"echarts-graph-modularity\"] = factory(require(\"echarts\"));\n\telse\n\t\troot[\"echarts-graph-modularity\"] = factory(root[\"echarts\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__550__) {\nreturn ","module.exports = require('./src/main');","module.exports.degree = require('./src/degree.js');\nmodule.exports.betweenness = require('./src/betweenness.js');\n","module.exports = betweennes;\n\n/**\n * I'm using http://www.inf.uni-konstanz.de/algo/publications/b-vspbc-08.pdf\n * as a reference for this implementation\n */\nfunction betweennes(graph, oriented) {\n  var Q = [],\n    S = []; // Queue and Stack\n  // list of predcessors on shorteest paths from source\n  var pred = Object.create(null);\n  // distance from source\n  var dist = Object.create(null);\n  // number of shortest paths from source to key\n  var sigma = Object.create(null);\n  // dependency of source on key\n  var delta = Object.create(null);\n\n  var currentNode;\n  var centrality = Object.create(null);\n\n  graph.forEachNode(setCentralityToZero);\n  graph.forEachNode(calculateCentrality);\n\n  if (!oriented) {\n    // The centrality scores need to be divided by two if the graph is not oriented,\n    // since all shortest paths are considered twice\n    Object.keys(centrality).forEach(divideByTwo);\n  }\n\n  return centrality;\n\n  function divideByTwo(key) {\n    centrality[key] /= 2;\n  }\n\n  function setCentralityToZero(node) {\n    centrality[node.id] = 0;\n  }\n\n  function calculateCentrality(node) {\n    currentNode = node.id;\n    singleSourceShortestPath(currentNode);\n    accumulate();\n  }\n\n  function accumulate() {\n    graph.forEachNode(setDeltaToZero);\n    while (S.length) {\n      var w = S.pop();\n      var coeff = (1 + delta[w])/sigma[w];\n      var predcessors = pred[w];\n      for (var idx = 0; idx < predcessors.length; ++idx) {\n        var v = predcessors[idx];\n        delta[v] += sigma[v] * coeff;\n      }\n      if (w !== currentNode) {\n        centrality[w] += delta[w];\n      }\n    }\n  }\n\n  function setDeltaToZero(node) {\n    delta[node.id] = 0;\n  }\n\n  function singleSourceShortestPath(source) {\n    graph.forEachNode(initNode);\n    dist[source] = 0;\n    sigma[source] = 1;\n    Q.push(source);\n\n    while (Q.length) {\n      var v = Q.shift();\n      S.push(v);\n      graph.forEachLinkedNode(v, toId, oriented);\n    }\n\n    function toId(otherNode) {\n      // NOTE: This code will also consider multi-edges, which are often\n      // ignored by popular software (Gephi/NetworkX). Depending on your use\n      // case this may not be desired and deduping needs to be performed. To\n      // save memory I'm not deduping here...\n      processNode(otherNode.id);\n    }\n\n    function initNode(node) {\n      var nodeId = node.id;\n      pred[nodeId] = []; // empty list\n      dist[nodeId] = -1;\n      sigma[nodeId] = 0;\n    }\n\n    function processNode(w) {\n      // path discovery\n      if (dist[w] === -1) {\n        // Node w is found for the first time\n        dist[w] = dist[v] + 1;\n        Q.push(w);\n      }\n      // path counting\n      if (dist[w] === dist[v] + 1) {\n        // edge (v, w) on a shortest path\n        sigma[w] += sigma[v];\n        pred[w].push(v);\n      }\n    }\n  }\n}\n","module.exports = degree;\n\n/**\n * Calculates graph nodes degree centrality (in/out or both).\n *\n * @see http://en.wikipedia.org/wiki/Centrality#Degree_centrality\n *\n * @param {ngraph.graph} graph object for which we are calculating centrality.\n * @param {string} [kind=both] What kind of degree centrality needs to be calculated:\n *   'in'    - calculate in-degree centrality\n *   'out'   - calculate out-degree centrality\n *   'inout' - (default) generic degree centrality is calculated\n */\nfunction degree(graph, kind) {\n  var getNodeDegree;\n  var result = Object.create(null);\n\n  kind = (kind || 'both').toLowerCase();\n  if (kind === 'both' || kind === 'inout') {\n    getNodeDegree = inoutDegreeCalculator;\n  } else if (kind === 'in') {\n    getNodeDegree = inDegreeCalculator;\n  } else if (kind === 'out') {\n    getNodeDegree = outDegreeCalculator;\n  } else {\n    throw new Error('Expected centrality degree kind is: in, out or both');\n  }\n\n  graph.forEachNode(calculateNodeDegree);\n\n  return result;\n\n  function calculateNodeDegree(node) {\n    var links = graph.getLinks(node.id);\n    result[node.id] = getNodeDegree(links, node.id);\n  }\n}\n\nfunction inDegreeCalculator(links, nodeId) {\n  var total = 0;\n  if (!links) return total;\n\n  for (var i = 0; i < links.length; i += 1) {\n    total += (links[i].toId === nodeId) ? 1 : 0;\n  }\n  return total;\n}\n\nfunction outDegreeCalculator(links, nodeId) {\n  var total = 0;\n  if (!links) return total;\n\n  for (var i = 0; i < links.length; i += 1) {\n    total += (links[i].fromId === nodeId) ? 1 : 0;\n  }\n  return total;\n}\n\nfunction inoutDegreeCalculator(links) {\n  if (!links) return 0;\n\n  return links.length;\n}\n","module.exports = function(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","/**\n * @fileOverview Contains definition of the core graph object.\n */\n\n/**\n * @example\n *  var graph = require('ngraph.graph')();\n *  graph.addNode(1);     // graph has one node.\n *  graph.addLink(2, 3);  // now graph contains three nodes and one link.\n *\n */\nmodule.exports = createGraph;\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates a new graph\n */\nfunction createGraph(options) {\n  // Graph structure is maintained as dictionary of nodes\n  // and array of links. Each node has 'links' property which\n  // hold all links related to that node. And general links\n  // array is used to speed up all links enumeration. This is inefficient\n  // in terms of memory, but simplifies coding.\n  options = options || {};\n  if (options.uniqueLinkId === undefined) {\n    // Request each link id to be unique between same nodes. This negatively\n    // impacts `addLink()` performance (O(n), where n - number of edges of each\n    // vertex), but makes operations with multigraphs more accessible.\n    options.uniqueLinkId = true;\n  }\n\n  var nodes = typeof Object.create === 'function' ? Object.create(null) : {},\n    links = [],\n    // Hash of multi-edges. Used to track ids of edges between same nodes\n    multiEdges = {},\n    nodesCount = 0,\n    suspendEvents = 0,\n\n    forEachNode = createNodeIterator(),\n    createLink = options.uniqueLinkId ? createUniqueLink : createSingleLink,\n\n    // Our graph API provides means to listen to graph changes. Users can subscribe\n    // to be notified about changes in the graph by using `on` method. However\n    // in some cases they don't use it. To avoid unnecessary memory consumption\n    // we will not record graph changes until we have at least one subscriber.\n    // Code below supports this optimization.\n    //\n    // Accumulates all changes made during graph updates.\n    // Each change element contains:\n    //  changeType - one of the strings: 'add', 'remove' or 'update';\n    //  node - if change is related to node this property is set to changed graph's node;\n    //  link - if change is related to link this property is set to changed graph's link;\n    changes = [],\n    recordLinkChange = noop,\n    recordNodeChange = noop,\n    enterModification = noop,\n    exitModification = noop;\n\n  // this is our public API:\n  var graphPart = {\n    /**\n     * Adds node to the graph. If node with given id already exists in the graph\n     * its data is extended with whatever comes in 'data' argument.\n     *\n     * @param nodeId the node's identifier. A string or number is preferred.\n     * @param [data] additional data for the node being added. If node already\n     *   exists its data object is augmented with the new one.\n     *\n     * @return {node} The newly added node or node with given id if it already exists.\n     */\n    addNode: addNode,\n\n    /**\n     * Adds a link to the graph. The function always create a new\n     * link between two nodes. If one of the nodes does not exists\n     * a new node is created.\n     *\n     * @param fromId link start node id;\n     * @param toId link end node id;\n     * @param [data] additional data to be set on the new link;\n     *\n     * @return {link} The newly created link\n     */\n    addLink: addLink,\n\n    /**\n     * Removes link from the graph. If link does not exist does nothing.\n     *\n     * @param link - object returned by addLink() or getLinks() methods.\n     *\n     * @returns true if link was removed; false otherwise.\n     */\n    removeLink: removeLink,\n\n    /**\n     * Removes node with given id from the graph. If node does not exist in the graph\n     * does nothing.\n     *\n     * @param nodeId node's identifier passed to addNode() function.\n     *\n     * @returns true if node was removed; false otherwise.\n     */\n    removeNode: removeNode,\n\n    /**\n     * Gets node with given identifier. If node does not exist undefined value is returned.\n     *\n     * @param nodeId requested node identifier;\n     *\n     * @return {node} in with requested identifier or undefined if no such node exists.\n     */\n    getNode: getNode,\n\n    /**\n     * Gets number of nodes in this graph.\n     *\n     * @return number of nodes in the graph.\n     */\n    getNodesCount: function() {\n      return nodesCount;\n    },\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getLinksCount: function() {\n      return links.length;\n    },\n\n    /**\n     * Gets all links (inbound and outbound) from the node with given id.\n     * If node with given id is not found null is returned.\n     *\n     * @param nodeId requested node identifier.\n     *\n     * @return Array of links from and to requested node if such node exists;\n     *   otherwise null is returned.\n     */\n    getLinks: getLinks,\n\n    /**\n     * Invokes callback on each node of the graph.\n     *\n     * @param {Function(node)} callback Function to be invoked. The function\n     *   is passed one argument: visited node.\n     */\n    forEachNode: forEachNode,\n\n    /**\n     * Invokes callback on every linked (adjacent) node to the given one.\n     *\n     * @param nodeId Identifier of the requested node.\n     * @param {Function(node, link)} callback Function to be called on all linked nodes.\n     *   The function is passed two parameters: adjacent node and link object itself.\n     * @param oriented if true graph treated as oriented.\n     */\n    forEachLinkedNode: forEachLinkedNode,\n\n    /**\n     * Enumerates all links in the graph\n     *\n     * @param {Function(link)} callback Function to be called on all links in the graph.\n     *   The function is passed one parameter: graph's link object.\n     *\n     * Link object contains at least the following fields:\n     *  fromId - node id where link starts;\n     *  toId - node id where link ends,\n     *  data - additional data passed to graph.addLink() method.\n     */\n    forEachLink: forEachLink,\n\n    /**\n     * Suspend all notifications about graph changes until\n     * endUpdate is called.\n     */\n    beginUpdate: enterModification,\n\n    /**\n     * Resumes all notifications about graph changes and fires\n     * graph 'changed' event in case there are any pending changes.\n     */\n    endUpdate: exitModification,\n\n    /**\n     * Removes all nodes and links from the graph.\n     */\n    clear: clear,\n\n    /**\n     * Detects whether there is a link between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     * NOTE: this function is synonim for getLink()\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    hasLink: getLink,\n\n    /**\n     * Gets an edge between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     *\n     * @param {string} fromId link start identifier\n     * @param {string} toId link end identifier\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    getLink: getLink\n  };\n\n  // this will add `on()` and `fire()` methods.\n  eventify(graphPart);\n\n  monitorSubscribers();\n\n  return graphPart;\n\n  function monitorSubscribers() {\n    var realOn = graphPart.on;\n\n    // replace real `on` with our temporary on, which will trigger change\n    // modification monitoring:\n    graphPart.on = on;\n\n    function on() {\n      // now it's time to start tracking stuff:\n      graphPart.beginUpdate = enterModification = enterModificationReal;\n      graphPart.endUpdate = exitModification = exitModificationReal;\n      recordLinkChange = recordLinkChangeReal;\n      recordNodeChange = recordNodeChangeReal;\n\n      // this will replace current `on` method with real pub/sub from `eventify`.\n      graphPart.on = realOn;\n      // delegate to real `on` handler:\n      return realOn.apply(graphPart, arguments);\n    }\n  }\n\n  function recordLinkChangeReal(link, changeType) {\n    changes.push({\n      link: link,\n      changeType: changeType\n    });\n  }\n\n  function recordNodeChangeReal(node, changeType) {\n    changes.push({\n      node: node,\n      changeType: changeType\n    });\n  }\n\n  function addNode(nodeId, data) {\n    if (nodeId === undefined) {\n      throw new Error('Invalid node identifier');\n    }\n\n    enterModification();\n\n    var node = getNode(nodeId);\n    if (!node) {\n      node = new Node(nodeId);\n      nodesCount++;\n      recordNodeChange(node, 'add');\n    } else {\n      recordNodeChange(node, 'update');\n    }\n\n    node.data = data;\n\n    nodes[nodeId] = node;\n\n    exitModification();\n    return node;\n  }\n\n  function getNode(nodeId) {\n    return nodes[nodeId];\n  }\n\n  function removeNode(nodeId) {\n    var node = getNode(nodeId);\n    if (!node) {\n      return false;\n    }\n\n    enterModification();\n\n    if (node.links) {\n      while (node.links.length) {\n        var link = node.links[0];\n        removeLink(link);\n      }\n    }\n\n    delete nodes[nodeId];\n    nodesCount--;\n\n    recordNodeChange(node, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n\n  function addLink(fromId, toId, data) {\n    enterModification();\n\n    var fromNode = getNode(fromId) || addNode(fromId);\n    var toNode = getNode(toId) || addNode(toId);\n\n    var link = createLink(fromId, toId, data);\n\n    links.push(link);\n\n    // TODO: this is not cool. On large graphs potentially would consume more memory.\n    addLinkToNode(fromNode, link);\n    if (fromId !== toId) {\n      // make sure we are not duplicating links for self-loops\n      addLinkToNode(toNode, link);\n    }\n\n    recordLinkChange(link, 'add');\n\n    exitModification();\n\n    return link;\n  }\n\n  function createSingleLink(fromId, toId, data) {\n    var linkId = makeLinkId(fromId, toId);\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function createUniqueLink(fromId, toId, data) {\n    // TODO: Get rid of this method.\n    var linkId = makeLinkId(fromId, toId);\n    var isMultiEdge = multiEdges.hasOwnProperty(linkId);\n    if (isMultiEdge || getLink(fromId, toId)) {\n      if (!isMultiEdge) {\n        multiEdges[linkId] = 0;\n      }\n      var suffix = '@' + (++multiEdges[linkId]);\n      linkId = makeLinkId(fromId + suffix, toId + suffix);\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function getLinks(nodeId) {\n    var node = getNode(nodeId);\n    return node ? node.links : null;\n  }\n\n  function removeLink(link) {\n    if (!link) {\n      return false;\n    }\n    var idx = indexOfElementInArray(link, links);\n    if (idx < 0) {\n      return false;\n    }\n\n    enterModification();\n\n    links.splice(idx, 1);\n\n    var fromNode = getNode(link.fromId);\n    var toNode = getNode(link.toId);\n\n    if (fromNode) {\n      idx = indexOfElementInArray(link, fromNode.links);\n      if (idx >= 0) {\n        fromNode.links.splice(idx, 1);\n      }\n    }\n\n    if (toNode) {\n      idx = indexOfElementInArray(link, toNode.links);\n      if (idx >= 0) {\n        toNode.links.splice(idx, 1);\n      }\n    }\n\n    recordLinkChange(link, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n  function getLink(fromNodeId, toNodeId) {\n    // TODO: Use sorted links to speed this up\n    var node = getNode(fromNodeId),\n      i;\n    if (!node || !node.links) {\n      return null;\n    }\n\n    for (i = 0; i < node.links.length; ++i) {\n      var link = node.links[i];\n      if (link.fromId === fromNodeId && link.toId === toNodeId) {\n        return link;\n      }\n    }\n\n    return null; // no link.\n  }\n\n  function clear() {\n    enterModification();\n    forEachNode(function(node) {\n      removeNode(node.id);\n    });\n    exitModification();\n  }\n\n  function forEachLink(callback) {\n    var i, length;\n    if (typeof callback === 'function') {\n      for (i = 0, length = links.length; i < length; ++i) {\n        callback(links[i]);\n      }\n    }\n  }\n\n  function forEachLinkedNode(nodeId, callback, oriented) {\n    var node = getNode(nodeId);\n\n    if (node && node.links && typeof callback === 'function') {\n      if (oriented) {\n        return forEachOrientedLink(node.links, nodeId, callback);\n      } else {\n        return forEachNonOrientedLink(node.links, nodeId, callback);\n      }\n    }\n  }\n\n  function forEachNonOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      var linkedNodeId = link.fromId === nodeId ? link.toId : link.fromId;\n\n      quitFast = callback(nodes[linkedNodeId], link);\n      if (quitFast) {\n        return true; // Client does not need more iterations. Break now.\n      }\n    }\n  }\n\n  function forEachOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      if (link.fromId === nodeId) {\n        quitFast = callback(nodes[link.toId], link);\n        if (quitFast) {\n          return true; // Client does not need more iterations. Break now.\n        }\n      }\n    }\n  }\n\n  // we will not fire anything until users of this library explicitly call `on()`\n  // method.\n  function noop() {}\n\n  // Enter, Exit modification allows bulk graph updates without firing events.\n  function enterModificationReal() {\n    suspendEvents += 1;\n  }\n\n  function exitModificationReal() {\n    suspendEvents -= 1;\n    if (suspendEvents === 0 && changes.length > 0) {\n      graphPart.fire('changed', changes);\n      changes.length = 0;\n    }\n  }\n\n  function createNodeIterator() {\n    // Object.keys iterator is 1.3x faster than `for in` loop.\n    // See `https://github.com/anvaka/ngraph.graph/tree/bench-for-in-vs-obj-keys`\n    // branch for perf test\n    return Object.keys ? objectKeysIterator : forInIterator;\n  }\n\n  function objectKeysIterator(callback) {\n    if (typeof callback !== 'function') {\n      return;\n    }\n\n    var keys = Object.keys(nodes);\n    for (var i = 0; i < keys.length; ++i) {\n      if (callback(nodes[keys[i]])) {\n        return true; // client doesn't want to proceed. Return.\n      }\n    }\n  }\n\n  function forInIterator(callback) {\n    if (typeof callback !== 'function') {\n      return;\n    }\n    var node;\n\n    for (node in nodes) {\n      if (callback(nodes[node])) {\n        return true; // client doesn't want to proceed. Return.\n      }\n    }\n  }\n}\n\n// need this for old browsers. Should this be a separate module?\nfunction indexOfElementInArray(element, array) {\n  if (!array) return -1;\n\n  if (array.indexOf) {\n    return array.indexOf(element);\n  }\n\n  var len = array.length,\n    i;\n\n  for (i = 0; i < len; i += 1) {\n    if (array[i] === element) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * Internal structure to represent node;\n */\nfunction Node(id) {\n  this.id = id;\n  this.links = null;\n  this.data = null;\n}\n\nfunction addLinkToNode(node, link) {\n  if (node.links) {\n    node.links.push(link);\n  } else {\n    node.links = [link];\n  }\n}\n\n/**\n * Internal structure to represent links;\n */\nfunction Link(fromId, toId, data, id) {\n  this.fromId = fromId;\n  this.toId = toId;\n  this.data = data;\n  this.id = id;\n}\n\nfunction hashCode(str) {\n  var hash = 0, i, chr, len;\n  if (str.length == 0) return hash;\n  for (i = 0, len = str.length; i < len; i++) {\n    chr   = str.charCodeAt(i);\n    hash  = ((hash << 5) - hash) + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n}\n\nfunction makeLinkId(fromId, toId) {\n  return hashCode(fromId.toString() + '👉 ' + toId.toString());\n}\n","/**\r\n * @param {CommunityStructure|Community} com\r\n * @constructor\r\n */\r\nfunction Community(com) {\r\n\r\n    /** @type {CommunityStructure} */\r\n    this.structure = com.structure ? com.structure : com;\r\n\r\n    /** @type {Map.<Community, Number>} */\r\n    this.connectionsWeight = new Map();\r\n\r\n    /** @type {Map.<Community, Number>} */\r\n    this.connectionsCount = new Map();\r\n\r\n    /** @type {Set.<Number>} */\r\n    this.nodes = new Set;\r\n\r\n    this.weightSum = 0;\r\n\r\n\r\n}\r\n\r\n/**\r\n * @public\r\n * @returns {Number}\r\n */\r\nCommunity.prototype.size = function() {\r\n    return this.nodes.size;\r\n};\r\n\r\n\r\n/**\r\n * @param {Number} node\r\n */\r\nCommunity.prototype.seed = function(node) {\r\n\r\n    this.nodes.add(node);\r\n    this.weightSum += this.structure.weights[node];\r\n\r\n};\r\n\r\n/**\r\n * @param {Number} nodeId\r\n * @returns {boolean}\r\n */\r\nCommunity.prototype.add = function(nodeId) {\r\n\r\n    this.nodes.add(nodeId);\r\n    this.weightSum += this.structure.weights[nodeId];\r\n    return true;\r\n\r\n};\r\n\r\n/**\r\n * @param {Number} node\r\n * @returns {boolean}\r\n */\r\nCommunity.prototype.remove = function(node) {\r\n\r\n    var result = this.nodes.delete(node);\r\n\r\n    this.weightSum -= this.structure.weights[node];\r\n    if (!this.nodes.size) {\r\n        var index = this.structure.communities.indexOf(this);\r\n        delete this.structure.communities[index];\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nmodule.exports = Community;\r\n","\"use strict\";\r\nvar Community = require('./Community')\r\n    , ModEdge = require('./ModEdge')\r\n    ;\r\n\r\n/**\r\n *\r\n * @param {IGraph} graph\r\n * @param useWeight\r\n * @param {CommunityStructure} structure\r\n * @constructor\r\n */\r\nfunction CommunityStructure(graph, useWeight) {\r\n\r\n    //this.graph = graph;\r\n    this.N = graph.getNodesCount();\r\n    this.graphWeightSum = 0;\r\n    this.structure = this;\r\n\r\n    /** @type {Map.<Number, Community>} */\r\n    this.invMap = new Map();\r\n\r\n    /** @type {Array.< Map.<Community, Number> >} */\r\n    this.nodeConnectionsWeight = new Array(this.N);\r\n\r\n    /** @type {Array.< Map.<Community, Number> >} */\r\n    this.nodeConnectionsCount = new Array(this.N);\r\n\r\n    /** @type {Array.<Community>} */\r\n    this.nodeCommunities = new Array(this.N);\r\n\r\n    /** @type {Map.<Node, Number>} */\r\n    this.map = new Map();\r\n\r\n    /** @type {Array.< Array.<ModEdge> >} */\r\n    this.topology = new Array(this.N);\r\n    for (var i = 0; i < this.N; i++) this.topology[i] = [];\r\n\r\n    /** @type {Array.<Community>} */\r\n    this.communities = [];\r\n\r\n    /**@type {Array.<Number>} */\r\n    this.weights = new Array(this.N);\r\n\r\n    var index = 0;\r\n\r\n    graph.forEachNode(function (node) {\r\n\r\n        this.map.set(node.id, index);\r\n        this.nodeCommunities[index] = new Community(this);\r\n        this.nodeConnectionsWeight[index] = new Map();\r\n        this.nodeConnectionsCount[index] = new Map();\r\n        this.weights[index] = 0;\r\n        this.nodeCommunities[index].seed(index);\r\n        var hidden = new Community(this);\r\n        hidden.nodes.add(index);\r\n        this.invMap.set(index, hidden);\r\n        this.communities.push(this.nodeCommunities[index]);\r\n        index++;\r\n\r\n    }.bind(this));\r\n\r\n\r\n    graph.forEachLink(function (link) {\r\n\r\n        var node_index = this.map.get(link.fromId)\r\n            , neighbor_index = this.map.get(link.toId)\r\n            , weight = 1\r\n            ;\r\n\r\n        if (node_index === neighbor_index) {\r\n            return;\r\n        }\r\n\r\n        if (useWeight) {\r\n            weight = link.data.weight;\r\n        }\r\n\r\n        this.setUpLink(node_index, neighbor_index, weight);\r\n        this.setUpLink(neighbor_index, node_index, weight);\r\n\r\n\r\n    }.bind(this));\r\n\r\n\r\n    this.graphWeightSum /= 2.0;\r\n}\r\n\r\n\r\nCommunityStructure.prototype.setUpLink = function (node_index, neighbor_index, weight) {\r\n\r\n    this.weights[node_index] += weight;\r\n    var /** @type {ModEdge} */ me = new ModEdge(node_index, neighbor_index, weight);\r\n    this.topology[node_index].push(me);\r\n    var /** @type {Community} **/ adjCom = this.nodeCommunities[neighbor_index];\r\n    this.nodeConnectionsWeight[node_index].set(adjCom, weight);\r\n    this.nodeConnectionsCount[node_index].set(adjCom, 1);\r\n    this.nodeCommunities[node_index].connectionsWeight.set(adjCom, weight);\r\n    this.nodeCommunities[node_index].connectionsCount.set(adjCom, 1);\r\n    this.nodeConnectionsWeight[neighbor_index].set(this.nodeCommunities[node_index], weight);\r\n    this.nodeConnectionsCount[neighbor_index].set(this.nodeCommunities[node_index], 1);\r\n    this.nodeCommunities[neighbor_index].connectionsWeight.set(this.nodeCommunities[node_index], weight);\r\n    this.nodeCommunities[neighbor_index].connectionsCount.set(this.nodeCommunities[node_index], 1);\r\n    this.graphWeightSum += weight;\r\n\r\n};\r\n\r\n/**\r\n * @param {Number} node\r\n * @param {Community} to\r\n */\r\nCommunityStructure.prototype.addNodeTo = function (node, to) {\r\n\r\n    to.add(node);\r\n    this.nodeCommunities[node] = to;\r\n\r\n    var nodeTopology = this.topology[node];\r\n    for (var topologyKey in nodeTopology) {\r\n\r\n        //noinspection JSUnfilteredForInLoop\r\n        var /** @type {ModEdge} */ e = nodeTopology[topologyKey];\r\n\r\n        var neighbor = e.target;\r\n\r\n\r\n        //Remove Node Connection to this community\r\n        var neighEdgesTo = this.nodeConnectionsWeight[neighbor].get(to);\r\n        if (neighEdgesTo === undefined) {\r\n            this.nodeConnectionsWeight[neighbor].set(to, e.weight);\r\n        } else {\r\n            this.nodeConnectionsWeight[neighbor].set(to, neighEdgesTo + e.weight);\r\n        }\r\n\r\n        var neighCountEdgesTo = this.nodeConnectionsCount[neighbor].get(to);\r\n        if (neighCountEdgesTo === undefined) {\r\n            this.nodeConnectionsCount[neighbor].set(to, 1);\r\n        } else {\r\n            this.nodeConnectionsCount[neighbor].set(to, neighCountEdgesTo + 1);\r\n        }\r\n\r\n\r\n        var /** @type {Community} */ adjCom = this.nodeCommunities[neighbor];\r\n        var wEdgesto = adjCom.connectionsWeight.get(to);\r\n        if (wEdgesto === undefined) {\r\n            adjCom.connectionsWeight.set(to, e.weight);\r\n        } else {\r\n            adjCom.connectionsWeight.set(to, wEdgesto + e.weight);\r\n        }\r\n\r\n        var cEdgesto = adjCom.connectionsCount.get(to);\r\n        if (cEdgesto === undefined) {\r\n            adjCom.connectionsCount.set(to, 1);\r\n        } else {\r\n            adjCom.connectionsCount.set(to, cEdgesto + 1);\r\n        }\r\n\r\n        var nodeEdgesTo = this.nodeConnectionsWeight[node].get(adjCom);\r\n        if (nodeEdgesTo === undefined) {\r\n            this.nodeConnectionsWeight[node].set(adjCom, e.weight);\r\n        } else {\r\n            this.nodeConnectionsWeight[node].set(adjCom, nodeEdgesTo + e.weight);\r\n        }\r\n\r\n        var nodeCountEdgesTo = this.nodeConnectionsCount[node].get(adjCom);\r\n        if (nodeCountEdgesTo === undefined) {\r\n            this.nodeConnectionsCount[node].set(adjCom, 1);\r\n        } else {\r\n            this.nodeConnectionsCount[node].set(adjCom, nodeCountEdgesTo + 1);\r\n        }\r\n\r\n        if (to != adjCom) {\r\n            var comEdgesto = to.connectionsWeight.get(adjCom);\r\n            if (comEdgesto === undefined) {\r\n                to.connectionsWeight.set(adjCom, e.weight);\r\n            } else {\r\n                to.connectionsWeight.set(adjCom, comEdgesto + e.weight);\r\n            }\r\n\r\n            var comCountEdgesto = to.connectionsCount.get(adjCom);\r\n            if (comCountEdgesto === undefined) {\r\n                to.connectionsCount.set(adjCom, 1);\r\n            } else {\r\n                to.connectionsCount.set(adjCom, comCountEdgesto + 1);\r\n            }\r\n\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * @param {Number} node\r\n * @param {Community} source\r\n */\r\nCommunityStructure.prototype.removeNodeFrom = function (node, source) {\r\n\r\n    var community = this.nodeCommunities[node];\r\n\r\n\r\n    var nodeTopology = this.topology[node];\r\n    for (var topologyKey in nodeTopology) {\r\n\r\n        //noinspection JSUnfilteredForInLoop\r\n        var /** @type {ModEdge} */ e = nodeTopology[topologyKey];\r\n\r\n        var neighbor = e.target;\r\n\r\n        //Remove Node Connection to this community\r\n        var edgesTo = this.nodeConnectionsWeight[neighbor].get(community);\r\n        var countEdgesTo = this.nodeConnectionsCount[neighbor].get(community);\r\n\r\n        if ((countEdgesTo - 1) == 0) {\r\n            this.nodeConnectionsWeight[neighbor].delete(community);\r\n            this.nodeConnectionsCount[neighbor].delete(community);\r\n        } else {\r\n            this.nodeConnectionsWeight[neighbor].set(community, edgesTo - e.weight);\r\n            this.nodeConnectionsCount[neighbor].set(community, countEdgesTo - 1);\r\n        }\r\n\r\n\r\n        //Remove Adjacency Community's connection to this community\r\n        var adjCom = this.nodeCommunities[neighbor];\r\n        var oEdgesto = adjCom.connectionsWeight.get(community);\r\n        var oCountEdgesto = adjCom.connectionsCount.get(community);\r\n        if ((oCountEdgesto - 1) == 0) {\r\n            adjCom.connectionsWeight.delete(community);\r\n            adjCom.connectionsCount.delete(community);\r\n        } else {\r\n            adjCom.connectionsWeight.set(community, oEdgesto - e.weight);\r\n            adjCom.connectionsCount.set(community, oCountEdgesto - 1);\r\n        }\r\n\r\n        if (node == neighbor) {\r\n            continue;\r\n        }\r\n\r\n        if (adjCom != community) {\r\n\r\n            var comEdgesto = community.connectionsWeight.get(adjCom);\r\n            var comCountEdgesto = community.connectionsCount.get(adjCom);\r\n\r\n            if (comCountEdgesto - 1 == 0) {\r\n                community.connectionsWeight.delete(adjCom);\r\n                community.connectionsCount.delete(adjCom);\r\n            } else {\r\n                community.connectionsWeight.set(adjCom, comEdgesto - e.weight);\r\n                community.connectionsCount.set(adjCom, comCountEdgesto - 1);\r\n            }\r\n\r\n        }\r\n\r\n        var nodeEdgesTo = this.nodeConnectionsWeight[node].get(adjCom);\r\n        var nodeCountEdgesTo = this.nodeConnectionsCount[node].get(adjCom);\r\n\r\n        if ((nodeCountEdgesTo - 1) == 0) {\r\n            this.nodeConnectionsWeight[node].delete(adjCom);\r\n            this.nodeConnectionsCount[node].delete(adjCom);\r\n        } else {\r\n            this.nodeConnectionsWeight[node].set(adjCom, nodeEdgesTo - e.weight);\r\n            this.nodeConnectionsCount[node].set(adjCom, nodeCountEdgesTo - 1);\r\n        }\r\n\r\n    }\r\n\r\n    source.remove(node);\r\n};\r\n\r\n/**\r\n * @param {Number} node\r\n * @param {Community} to\r\n */\r\nCommunityStructure.prototype.moveNodeTo = function (node, to) {\r\n\r\n    var source = this.nodeCommunities[node];\r\n    this.removeNodeFrom(node, source);\r\n    this.addNodeTo(node, to);\r\n\r\n};\r\n\r\n\r\nCommunityStructure.prototype.zoomOut = function () {\r\n    var realCommunities = this.communities.reduce(function (arr, value) {\r\n        arr.push(value);\r\n        return arr;\r\n    }, []);\r\n    var M = realCommunities.length; // size\r\n    var /** @type Array.< Array.<ModEdge> > */ newTopology = new Array(M);\r\n    var index = 0;\r\n\r\n    this.nodeCommunities = new Array(M);\r\n    this.nodeConnectionsWeight = new Array(M);\r\n    this.nodeConnectionsCount = new Array(M);\r\n\r\n    var /** @type Map.<Number, Community>*/ newInvMap = new Map();\r\n    realCommunities.forEach(function (com) {\r\n\r\n        var weightSum = 0;\r\n        this.nodeConnectionsWeight[index] = new Map();\r\n        this.nodeConnectionsCount[index] = new Map();\r\n        newTopology[index] = [];\r\n        this.nodeCommunities[index] = new Community(com);\r\n        //var iter = com.connectionsWeight.keySet();\r\n\r\n        var hidden = new Community(this.structure);\r\n\r\n        com.nodes.forEach(function (nodeInt) {\r\n\r\n            var oldHidden = this.invMap.get(nodeInt);\r\n            oldHidden.nodes.forEach(hidden.nodes.add.bind(hidden.nodes));\r\n\r\n        }, this);\r\n\r\n        newInvMap.set(index, hidden);\r\n        com.connectionsWeight.forEach(function (weight, adjCom) {\r\n\r\n            var target = realCommunities.indexOf(adjCom);\r\n            if (!~target) return;\r\n            if (target == index) {\r\n                weightSum += 2. * weight;\r\n            } else {\r\n                weightSum += weight;\r\n            }\r\n            var e = new ModEdge(index, target, weight);\r\n            newTopology[index].push(e);\r\n\r\n        }, this);\r\n\r\n        this.weights[index] = weightSum;\r\n        this.nodeCommunities[index].seed(index);\r\n\r\n        index++;\r\n\r\n    }.bind(this));\r\n\r\n    this.communities = [];\r\n\r\n    for (var i = 0; i < M; i++) {\r\n        var com = this.nodeCommunities[i];\r\n        this.communities.push(com);\r\n        for (var ei in newTopology[i]) {\r\n            //noinspection JSUnfilteredForInLoop\r\n            var e = newTopology[i][ei];\r\n            this.nodeConnectionsWeight[i].set(this.nodeCommunities[e.target], e.weight);\r\n            this.nodeConnectionsCount[i].set(this.nodeCommunities[e.target], 1);\r\n            com.connectionsWeight.set(this.nodeCommunities[e.target], e.weight);\r\n            com.connectionsCount.set(this.nodeCommunities[e.target], 1);\r\n        }\r\n\r\n    }\r\n\r\n    this.N = M;\r\n    this.topology = newTopology;\r\n    this.invMap = newInvMap;\r\n\r\n};\r\n\r\nmodule.exports = CommunityStructure;","/**\r\n *\r\n * @param s\r\n * @param t\r\n * @param w\r\n * @constructor\r\n */\r\nfunction ModEdge(s, t, w) {\r\n    /** @type {Number} */\r\n    this.source = s;\r\n    /** @type {Number} */\r\n    this.target = t;\r\n    /** @type {Number} */\r\n    this.weight = w;\r\n}\r\n\r\nmodule.exports = ModEdge;\r\n","/*\r\n Copyright 2008-2011 Gephi\r\n Authors : Patick J. McSweeney <pjmcswee@syr.edu>, Sebastien Heymann <seb@gephi.org>\r\n Website : http://www.gephi.org\r\n\r\n This file is part of Gephi.\r\n\r\n DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.\r\n\r\n Copyright 2011 Gephi Consortium. All rights reserved.\r\n\r\n The contents of this file are subject to the terms of either the GNU\r\n General Public License Version 3 only (\"GPL\") or the Common\r\n Development and Distribution License(\"CDDL\") (collectively, the\r\n \"License\"). You may not use this file except in compliance with the\r\n License. You can obtain a copy of the License at\r\n http://gephi.org/about/legal/license-notice/\r\n or /cddl-1.0.txt and /gpl-3.0.txt. See the License for the\r\n specific language governing permissions and limitations under the\r\n License.  When distributing the software, include this License Header\r\n Notice in each file and include the License files at\r\n /cddl-1.0.txt and /gpl-3.0.txt. If applicable, add the following below the\r\n License Header, with the fields enclosed by brackets [] replaced by\r\n your own identifying information:\r\n \"Portions Copyrighted [year] [name of copyright owner]\"\r\n\r\n If you wish your version of this file to be governed by only the CDDL\r\n or only the GPL Version 3, indicate your decision by adding\r\n \"[Contributor] elects to include this software in this distribution\r\n under the [CDDL or GPL Version 3] license.\" If you do not indicate a\r\n single choice of license, a recipient has the option to distribute\r\n your version of this file under either the CDDL, the GPL Version 3 or\r\n to extend the choice of license to its licensees as provided above.\r\n However, if you add GPL Version 3 code and therefore, elected the GPL\r\n Version 3 license, then the option applies only if the new code is\r\n made subject to such option by the copyright holder.\r\n\r\n Contributor(s): Thomas Aynaud <taynaud@gmail.com>\r\n\r\n Portions Copyrighted 2011 Gephi Consortium.\r\n */\r\nvar CommunityStructure = require('./CommunityStructure')\r\n    , centrality = require('ngraph.centrality')\r\n    ;\r\n\r\n/**\r\n * @constructor\r\n */\r\nfunction Modularity (resolution, useWeight) {\r\n    this.isRandomized = false;\r\n    this.useWeight = useWeight;\r\n    this.resolution = resolution || 1.;\r\n    /**\r\n     * @type {CommunityStructure}\r\n     */\r\n    this.structure = null;\r\n}\r\n\r\n/**\r\n * @param {IGraph} graph\r\n */\r\nModularity.prototype.execute = function (graph/*, AttributeModel attributeModel*/) {\r\n\r\n\r\n    this.structure = new CommunityStructure(graph, this.useWeight);\r\n\r\n    var comStructure = new Array(graph.getNodesCount());\r\n\r\n    var computedModularityMetrics = this.computeModularity(\r\n        graph\r\n        , this.structure\r\n        , comStructure\r\n        , this.resolution\r\n        , this.isRandomized\r\n        , this.useWeight\r\n    );\r\n\r\n    var result = {};\r\n    this.structure.map.forEach(function (i, node) {\r\n        result[node] = comStructure[i];\r\n    });\r\n\r\n    return result;\r\n\r\n};\r\n\r\n\r\n/**\r\n *\r\n * @param {IGraph} graph\r\n * @param {CommunityStructure} theStructure\r\n * @param {Array.<Number>} comStructure\r\n * @param {Number} currentResolution\r\n * @param {Boolean} randomized\r\n * @param {Boolean} weighted\r\n * @returns {Object.<String, Number>}\r\n */\r\nModularity.prototype.computeModularity = function(graph, theStructure, comStructure,  currentResolution, randomized, weighted) {\r\n\r\n\r\n    function getRandomInt(min, max) {\r\n        return Math.floor(Math.random() * (max - min)) + min;\r\n    }\r\n\r\n    var totalWeight = theStructure.graphWeightSum;\r\n    var nodeDegrees = theStructure.weights.slice();\r\n\r\n\r\n    var /** @type {Object.<String, Number>} */ results = Object.create(null);\r\n\r\n\r\n    var someChange = true;\r\n\r\n    while (someChange) {\r\n        someChange = false;\r\n        var localChange = true;\r\n        while (localChange) {\r\n            localChange = false;\r\n            var start = 0;\r\n            if (randomized) {\r\n                //start = Math.abs(rand.nextInt()) % theStructure.N;\r\n                start = getRandomInt(0,theStructure.N);\r\n            }\r\n            var step = 0;\r\n            for (var i = start; step < theStructure.N; i = (i + 1) % theStructure.N) {\r\n                step++;\r\n                var bestCommunity = this.updateBestCommunity(theStructure, i, currentResolution);\r\n                if ((theStructure.nodeCommunities[i] != bestCommunity) && (bestCommunity != null)) {\r\n                    theStructure.moveNodeTo(i, bestCommunity);\r\n                    localChange = true;\r\n                }\r\n\r\n            }\r\n\r\n            someChange = localChange || someChange;\r\n\r\n        }\r\n\r\n        if (someChange) {\r\n            theStructure.zoomOut();\r\n        }\r\n    }\r\n\r\n    this.fillComStructure(graph, theStructure, comStructure);\r\n\r\n    /*\r\n    //TODO: uncomment when finalQ will be implemented\r\n    var degreeCount = this.fillDegreeCount(graph, theStructure, comStructure, nodeDegrees, weighted);\r\n\r\n\r\n    var computedModularity = this._finalQ(comStructure, degreeCount, graph, theStructure, totalWeight, 1., weighted);\r\n    var computedModularityResolution = this._finalQ(comStructure, degreeCount, graph, theStructure, totalWeight, currentResolution, weighted);\r\n\r\n    results[\"modularity\"] =  computedModularity;\r\n    results[\"modularityResolution\"] =  computedModularityResolution;\r\n    */\r\n\r\n    return results;\r\n};\r\n\r\n\r\n/**\r\n * @param {CommunityStructure} theStructure\r\n * @param {Number} i\r\n * @param {Number} currentResolution\r\n * @returns {Community}\r\n */\r\nModularity.prototype.updateBestCommunity = function(theStructure,  i, currentResolution) {\r\n    var best = this.q(i, theStructure.nodeCommunities[i], theStructure, currentResolution);\r\n    var bestCommunity = theStructure.nodeCommunities[i];\r\n    //var /*Set<Community>*/ iter = theStructure.nodeConnectionsWeight[i].keySet();\r\n    theStructure.nodeConnectionsWeight[i].forEach(function (_$$val, com) {\r\n\r\n        var qValue = this.q(i, com, theStructure, currentResolution);\r\n        if (qValue > best) {\r\n            best = qValue;\r\n            bestCommunity = com;\r\n        }\r\n\r\n    }, this);\r\n    return bestCommunity;\r\n};\r\n\r\n/**\r\n *\r\n * @param {IGraph} graph\r\n * @param {CommunityStructure} theStructure\r\n * @param {Array.<Number>} comStructure\r\n * @returns {Array.<Number>}\r\n */\r\nModularity.prototype.fillComStructure = function(graph, theStructure, comStructure) {\r\n\r\n    var count = 0;\r\n\r\n    theStructure.communities.forEach(function (com) {\r\n\r\n        com.nodes.forEach(function (node) {\r\n\r\n            var hidden = theStructure.invMap.get(node);\r\n            hidden.nodes.forEach( function (nodeInt){\r\n                comStructure[nodeInt] = count;\r\n            });\r\n\r\n        });\r\n        count++;\r\n\r\n    });\r\n\r\n\r\n    return comStructure;\r\n};\r\n\r\n/**\r\n * @param {IGraph} graph\r\n * @param {CommunityStructure} theStructure\r\n * @param {Array.<Number>} comStructure\r\n * @param {Array.<Number>} nodeDegrees\r\n * @param {Boolean} weighted\r\n * @returns {Array.<Number>}\r\n */\r\nModularity.prototype.fillDegreeCount = function(graph, theStructure, comStructure, nodeDegrees, weighted) {\r\n\r\n    var degreeCount = new Array(theStructure.communities.length);\r\n    var degreeCentrality = centrality.degree(graph);\r\n\r\n    graph.forEachNode(function(node){\r\n\r\n        var index = theStructure.map.get(node);\r\n        if (weighted) {\r\n            degreeCount[comStructure[index]] += nodeDegrees[index];\r\n        } else {\r\n            degreeCount[comStructure[index]] += degreeCentrality[node.id];\r\n        }\r\n\r\n    });\r\n    return degreeCount;\r\n\r\n};\r\n\r\n\r\n/**\r\n *\r\n * @param {Array.<Number>} struct\r\n * @param {Array.<Number>} degrees\r\n * @param {IGraph} graph\r\n * @param {CommunityStructure} theStructure\r\n * @param {Number} totalWeight\r\n * @param {Number} usedResolution\r\n * @param {Boolean} weighted\r\n * @returns {Number}\r\n */\r\nModularity.prototype._finalQ = function(struct, degrees, graph, theStructure, totalWeight, usedResolution, weighted) {\r\n\r\n    //TODO: rewrite for wighted version of algorithm\r\n    throw new Error(\"not implemented properly\");\r\n    var  res = 0;\r\n    var  internal = new Array(degrees.length);\r\n\r\n    graph.forEachNode(function(n){\r\n        var n_index = theStructure.map.get(n);\r\n\r\n        graph.forEachLinkedNode(n.id, function(neighbor){\r\n            if (n == neighbor) {\r\n                return;\r\n            }\r\n            var neigh_index = theStructure.map.get(neighbor);\r\n            if (struct[neigh_index] == struct[n_index]) {\r\n                if (weighted) {\r\n                    //throw new Error(\"weighted aren't implemented\");\r\n                    //internal[struct[neigh_index]] += graph.getEdge(n, neighbor).getWeight();\r\n                } else {\r\n                    internal[struct[neigh_index]]++;\r\n                }\r\n            }\r\n        }.bind(this), false);\r\n\r\n    }.bind(this));\r\n\r\n    for (var i = 0; i < degrees.length; i++) {\r\n        internal[i] /= 2.0;\r\n        res += usedResolution * (internal[i] / totalWeight) - Math.pow(degrees[i] / (2 * totalWeight), 2);//HERE\r\n    }\r\n    return res;\r\n};\r\n\r\n\r\n\r\n/**\r\n *\r\n * @param {Number} nodeId\r\n * @param {Community} community\r\n * @param {CommunityStructure} theStructure\r\n * @param {Number} currentResolution\r\n * @returns {Number}\r\n */\r\nModularity.prototype.q = function(nodeId, community, theStructure, currentResolution) {\r\n\r\n    var edgesToFloat = theStructure.nodeConnectionsWeight[nodeId].get(community);\r\n    var edgesTo = 0;\r\n    if (edgesToFloat != null) {\r\n        edgesTo = edgesToFloat;\r\n    }\r\n    var weightSum = community.weightSum;\r\n    var nodeWeight = theStructure.weights[nodeId];\r\n    var qValue = currentResolution * edgesTo - (nodeWeight * weightSum) / (2.0 * theStructure.graphWeightSum);\r\n    if ((theStructure.nodeCommunities[nodeId] == community) && (theStructure.nodeCommunities[nodeId].size() > 1)) {\r\n        qValue = currentResolution * edgesTo - (nodeWeight * (weightSum - nodeWeight)) / (2.0 * theStructure.graphWeightSum);\r\n    }\r\n    if ((theStructure.nodeCommunities[nodeId] == community) && (theStructure.nodeCommunities[nodeId].size() == 1)) {\r\n        qValue = 0.;\r\n    }\r\n    return qValue;\r\n\r\n};\r\n\r\nmodule.exports = Modularity;","import Modularity from 'ngraph.modularity/Modularity';\nimport * as echarts from 'echarts/core';\nimport createNGraph from 'ngraph.graph';\n\nfunction createModularityVisual(chartType) {\n    return function (ecModel, api) {\n        var paletteScope = {};\n        ecModel.eachSeriesByType(chartType, function (seriesModel) {\n            var modularityOpt = seriesModel.get('modularity');\n            if (modularityOpt) {\n                var graph = seriesModel.getGraph();\n                var idIndexMap = {};\n                var ng = createNGraph();\n                graph.data.each(function (idx) {\n                    var node = graph.getNodeByIndex(idx);\n                    idIndexMap[node.id] = idx;\n                    ng.addNode(node.id);\n                    return node.id;\n                });\n                graph.edgeData.each('value', function (val, idx) {\n                    var edge = graph.getEdgeByIndex(idx);\n                    ng.addLink(edge.node1.id, edge.node2.id);\n                    return {\n                        source: edge.node1.id,\n                        target: edge.node2.id,\n                        value: val\n                    };\n                });\n\n                var modularity = new Modularity(seriesModel.get('modularity.resolution') || 1);\n                var result = modularity.execute(ng);\n\n                var communities = {};\n                for (var id in result) {\n                    var comm = result[id];\n                    communities[comm] = communities[comm] || 0;\n                    communities[comm]++;\n                }\n                var communitiesList = Object.keys(communities);\n                if (seriesModel.get('modularity.sort')) {\n                    communitiesList.sort(function (a, b) {\n                        return b - a;\n                    });\n                }\n                var colors = {};\n                communitiesList.forEach(function (comm) {\n                    colors[comm] = seriesModel.getColorFromPalette(comm, paletteScope);\n                });\n\n                for (var id in result) {\n                    var comm = result[id];\n                    var style = graph.data.ensureUniqueItemVisual(idIndexMap[id], 'style');\n                    style.fill = colors[comm];\n                }\n\n                graph.edgeData.each(function (idx) {\n                    var itemModel = graph.edgeData.getItemModel(idx);\n                    var edge = graph.getEdgeByIndex(idx);\n                    var color = itemModel.get(['lineStyle', 'normal', 'color'])\n                        || itemModel.get(['lineStyle', 'color']);\n\n                    switch (color) {\n                        case 'source':\n                            color = edge.node1.getVisual('style').fill;\n                            break;\n                        case 'target':\n                            color = edge.node2.getVisual('style').fill;\n                            break;\n                    }\n\n                    if (color != null) {\n                        graph.edgeData.ensureUniqueItemVisual(idx, 'style').stroke = color;\n                    }\n                });\n            }\n        });\n    };\n}\n\necharts.registerVisual(echarts.PRIORITY.VISUAL.CHART + 1, createModularityVisual('graph'));\necharts.registerVisual(echarts.PRIORITY.VISUAL.CHART + 1, createModularityVisual('graphGL'));","module.exports = __WEBPACK_EXTERNAL_MODULE__550__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(10);\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__550__","degree","betweenness","graph","oriented","currentNode","Q","S","pred","Object","create","dist","sigma","delta","centrality","forEachNode","node","id","source","nodeId","push","length","v","shift","forEachLinkedNode","toId","otherNode","w","singleSourceShortestPath","setDeltaToZero","pop","coeff","predcessors","idx","accumulate","keys","forEach","key","inDegreeCalculator","links","total","i","outDegreeCalculator","fromId","inoutDegreeCalculator","kind","getNodeDegree","result","toLowerCase","Error","getLinks","subject","reservedWords","hasOwnProperty","validateSubject","eventsStorage","registeredEvents","on","eventName","callback","ctx","handlers","off","callbacks","splice","fire","fireArguments","arguments","Array","prototype","call","callbackInfo","apply","createEventsStorage","options","undefined","uniqueLinkId","realOn","nodes","multiEdges","nodesCount","suspendEvents","createLink","data","linkId","makeLinkId","isMultiEdge","getLink","suffix","Link","changes","recordLinkChange","noop","recordNodeChange","enterModification","exitModification","graphPart","addNode","addLink","fromNode","getNode","toNode","link","addLinkToNode","removeLink","removeNode","getNodesCount","getLinksCount","forEachOrientedLink","linkedNodeId","forEachNonOrientedLink","forEachLink","beginUpdate","endUpdate","clear","hasLink","eventify","enterModificationReal","exitModificationReal","recordLinkChangeReal","recordNodeChangeReal","changeType","Node","indexOfElementInArray","fromNodeId","toNodeId","element","array","indexOf","len","this","str","hash","charCodeAt","hashCode","toString","Community","com","structure","connectionsWeight","Map","connectionsCount","Set","weightSum","size","seed","add","weights","remove","delete","index","communities","ModEdge","CommunityStructure","useWeight","N","graphWeightSum","invMap","nodeConnectionsWeight","nodeConnectionsCount","nodeCommunities","map","topology","set","hidden","bind","node_index","get","neighbor_index","weight","setUpLink","me","adjCom","addNodeTo","to","nodeTopology","topologyKey","e","neighbor","target","neighEdgesTo","neighCountEdgesTo","wEdgesto","cEdgesto","nodeEdgesTo","nodeCountEdgesTo","comEdgesto","comCountEdgesto","removeNodeFrom","community","edgesTo","countEdgesTo","oEdgesto","oCountEdgesto","moveNodeTo","zoomOut","realCommunities","reduce","arr","value","M","newTopology","newInvMap","nodeInt","ei","s","t","Modularity","resolution","isRandomized","execute","comStructure","computeModularity","theStructure","currentResolution","randomized","weighted","slice","max","results","someChange","localChange","start","Math","floor","random","step","bestCommunity","updateBestCommunity","fillComStructure","best","q","_$$val","qValue","count","fillDegreeCount","nodeDegrees","degreeCount","degreeCentrality","_finalQ","struct","degrees","totalWeight","usedResolution","edgesToFloat","nodeWeight","createModularityVisual","chartType","ecModel","api","paletteScope","eachSeriesByType","seriesModel","getGraph","idIndexMap","ng","each","getNodeByIndex","edgeData","val","edge","getEdgeByIndex","node1","node2","comm","communitiesList","sort","a","b","colors","getColorFromPalette","ensureUniqueItemVisual","fill","itemModel","getItemModel","color","getVisual","stroke","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","definition","o","defineProperty","enumerable","obj","prop","r","Symbol","toStringTag"],"sourceRoot":""}